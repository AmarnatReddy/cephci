#========================================================================
# Test-Case: Tier 1 CTDB with VIP
#
# Cluster Configuration: baremetal conf
#========================================================================
tests:
  - test:
      name: (Clustering - Public Address)Verify Samba deployment using auth_mode=user
      desc: (Clustering - Public Address)Verify Samba deployment using auth_mode=user
      module: smb_deployment_declarative_method.py
      polarion-id: CEPH-83597459
      config:
        file_type: yaml
        file_mount: /tmp
        spec:
          - resource_type: ceph.smb.cluster
            cluster_id: smb1
            auth_mode: user
            user_group_settings:
              - {source_type: resource, ref: ug1}
            placement:
              label: smb
            public_addrs:
              - address: 10.8.131.254/21
          - resource_type: ceph.smb.usersgroups
            users_groups_id: ug1
            values:
              users:
                - {name: user1, password: passwd}
              groups: []
          - resource_type: ceph.smb.share
            cluster_id: smb1
            share_id: share1
            cephfs:
              volume: cephfs
              subvolumegroup: smb
              subvolume: sv1
              path: /
